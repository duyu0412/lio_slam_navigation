common:
    lid_topic: "/unilidar/cloud" 
    imu_topic: "/unilidar/imu"
    con_frame: false
    con_frame_num: 1
    cut_frame: false
    cut_frame_time_interval: 0.1
    time_lag_imu_to_lidar: 0.0

preprocess:
    lidar_type: 5
    scan_line: 18
    timestamp_unit: 0
    blind: 0.5

mapping:
    imu_en: true
    start_in_aggressive_motion: false
    extrinsic_est_en: false
    imu_time_inte: 0.004
    satu_acc: 30.0
    satu_gyro: 35
    acc_norm: 9.81
    lidar_meas_cov: 0.01
    acc_cov_output: 500
    gyr_cov_output: 1000 
    b_acc_cov: 0.0001 
    b_gyr_cov: 0.0001 
    imu_meas_acc_cov: 0.1
    imu_meas_omg_cov: 0.1
    gyr_cov_input: 0.01
    acc_cov_input: 0.1
    plane_thr: 0.1
    match_s: 81
    fov_degree: 180 
    det_range: 100.0
    gravity_align: true
    gravity: [0.0, 0.0, -9.810]
    gravity_init: [0.0, 0.0, -9.810]
    extrinsic_T: [ 0.007698, 0.014655, -0.00667]
    extrinsic_R: [ 1, 0, 0,
                   0, 1, 0,
                   0, 0, 1 ]

odometry: 
    publish_odometry_without_downsample: enable  

publish:
    path_en: true
    scan_publish_en: true
    scan_bodyframe_pub_en: true

# ========== LOCALIZATION MODE ==========
localization:
    localization_mode: true  # 定位模式
    map_file_path: "/home/user/SLAM/src/point_lio_unilidar/PCD/optimized_map.pcd"  # 地图文件路径

pcd_save:
    pcd_save_en: false       # 定位模式不保存地图
    interval: -1
    map_save_downsample_en: false
    map_save_resolution: 0.05   

optimization:
    # 定位模式禁用回环检测和后端优化
    loop_closure_enable_flag: false  # 定位模式下关闭回环检测
    keyframe_add_dist_threshold: 2.0
    keyframe_add_angle_threshold: 0.2
    history_search_num: 25
    history_fitness_score: 0.5
    loop_closure_search_radius: 15
    loop_closure_time_threshold: 30.0
    max_retained_keyframes_cloud: 100  # 定位模式减少内存占用
    isam2_relinearize_threshold: 0.1
    isam2_relinearize_skip: 1
    prior_noise_rotation: 1e-2
    prior_noise_translation: 1e-2
    odometry_noise_rotation: 1e-4
    odometry_noise_translation: 1e-2
    loop_noise_rotation: 1e-4
    loop_noise_translation: 1e-2
